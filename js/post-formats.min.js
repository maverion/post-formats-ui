window.wp=window.wp||{},function(a){var b=Backbone.Model.extend({}),c=Backbone.View.extend({mode:b,el:"#postdivrich",render:function(){return a("#post-format-ui").empty(),this.showMetaBoxes(),this.$el.show().find(".wp-editor-area").removeAttr("disabled"),this},showMetaBoxes:function(){a(".postbox").each(function(){a(this).removeClass("cpffs-hidden")}),a(".metabox-prefs label").each(function(){a(this).removeClass("cpffs-hidden")})}}),d=Backbone.View.extend({model:b,el:"#post-format-ui",initialize:function(){this.template=_.template(a("#format-type").html())},render:function(){return this.$el.html(this.template(this.model.toJSON())),this.hideMetaboxes(),this},hideMetaboxes:function(){var b=this;a(".postbox").each(function(){a.inArray(a(this).attr("id"),b.model.get("hideBoxes"))<0&&a(this).addClass("cpffs-hidden")}),a(".metabox-prefs label").each(function(){a.inArray(a(this).attr("id"),b.model.get("hideLabels"))<0&&a(this).addClass("cpffs-hidden")}),a("#postdivrich").hide().find(".wp-editor-area").attr("disabled","disabled")}}),e=Backbone.View.extend({el:"#post-format-fs-info-container",model:b,template:_.template(a("#post-format-fs-info").html()),render:function(){this.$el.html(this.template(this.model.toJSON()))}}),f=Backbone.View.extend({el:"#change-post-format-ui",model:b,template:_.template(a("#change-post-format").html()),render:function(){return this.$el.html(this.template(this.model.toJSON())),this}}),g=Backbone.View.extend({el:".wrap",model:b,events:{"click .post-format-options a":"changePostFormat","click #change-post-format-ui":"showPostFormat"},initialize:function(){var a=this;this.subviews={},console.log(cpffs),cpffs.fs_info[0].fs_type?this.changePostFormat(null,cpffs.fs_info[0].fs_type):this.timeoutID=setTimeout(function(){a.changePostFormat()},1e4)},render:function(){return a("#post-format-ui").empty(),this.subviews.descriptionView.render(),this.subviews.bodyView.render(),this.subviews.infoView.render(),this},showPostFormat:function(){a(".post-format-options").slideDown(),a(".post-format-change").hide()},changePostFormat:function(g,h){var i;switch(clearTimeout(this.timeoutID),a(".post-format-options").slideUp(),"undefined"!=typeof h?i=h:"undefined"!=typeof g?(g.preventDefault(),i=a(g.currentTarget).attr("data-wp-format")):i="standard",formatAttrs={post_id:cpffs.post_id,hideBoxes:["submitdiv","postimagediv"],hideLabels:["postimagediv-hide"],inputs:[{el:"input",type:"text",label_name:i.charAt(0).toUpperCase()+i.slice(1)+" URL:",id:"fs_url"},{el:"input",type:"text",label_name:"Caption:",id:"fs_caption"},{el:"input",type:"text",label_name:"Credit:",id:"fs_credit"},{el:"textarea",label_name:"Description:",id:"fs_description"}],formatType:i},i){case"image":formatAttrs.formatDescription=cpffs.all_post_formats.image.description;break;case"gallery":formatAttrs.formatDescription=cpffs.all_post_formats.gallery.description;break;case"video":formatAttrs.formatDescription=cpffs.all_post_formats.video.description;break;case"audio":formatAttrs.formatDescription=cpffs.all_post_formats.audio.description;break;case"article":formatAttrs.formatDescription=cpffs.all_post_formats.article.description;break;case"chat":break;default:formatAttrs.formatDescription="This is an article"}this.model=new b(formatAttrs),this.subviews.bodyView="standard"===i?new c({}):new d({model:this.model}),this.subviews.infoView=new e({model:this.model}),this.subviews.descriptionView=new f({model:this.model}),this.render()}});new g}(jQuery);